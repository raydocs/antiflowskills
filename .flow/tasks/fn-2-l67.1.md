# fn-2-l67.1 验证 Factory 环境和工具映射

## Description

验证 Factory/Droid 环境，确认技能目录规范，完成工具映射表。

**Size:** S
**Files:** 无代码修改，仅验证和记录

## Approach

1. 确认 Factory 识别 `.factory/skills/` 目录
2. 验证 SKILL.md 格式要求（YAML frontmatter + Verification 节）
3. 记录技能执行时的 cwd 规则
4. 完成 Claude → Factory 工具映射表
5. 验证 description 语义触发格式要求
6. 记录 Factory 技能发现/加载验证方法

## Key context

- Factory 使用 `.factory/skills/` (非 `.agent/skills/`)
- Factory 技能为 model-invoked（语义触发），非 slash command
- 每个 SKILL.md 必须包含 Verification 节
- 参考 Factory 文档: https://docs.factory.ai/cli/configuration/skills

## Acceptance

- [ ] 确认 `.factory/skills/` 目录被 Factory 识别
- [ ] 记录技能执行时的 cwd 规则（明确：repo 内任意目录 vs 固定目录）
- [ ] 完成工具映射表（Claude tools → Factory tools）:
  | Claude Tool | Factory 等效 | 存在性 | 降级策略 |
  |-------------|-------------|--------|----------|
  | Grep | ? | ? | 提示用户执行 grep |
  | Glob | ? | ? | 提示用户执行 find |
  | Read | ? | ? | 提示用户提供内容 |
  | Task | ? | ? | 顺序执行 |
  | Bash | ? | ? | 通常支持 |
  | WebSearch | ? | ? | 提示用户手动搜索 |
  | WebFetch | ? | ? | 提示用户手动访问 |
  | git | git CLI | 预期支持 | 提示用户执行 git 命令 |
  | gh | gh CLI | 预期支持 | 提示用户执行 gh 命令 |
  | rp-cli | rp-cli | macOS only | 降级到 repo-scout |
- [ ] 记录 Verification 节的格式要求:
  - 每个 SKILL.md 必须有 `## Verification` 节
  - 包含可执行的 bash 命令
  - 每个命令有 `# 预期:` 注释说明成功条件
- [ ] 记录 YAML frontmatter 必需字段:
  - `name`: 是否必须匹配文件夹名?
  - `description`: 语义触发文本
  - 其他 Factory 特有字段?
- [ ] 记录技能命名约束（文件夹名规范）
- [ ] 记录技能发现/加载验证方法（如何确认 Factory 加载了技能）
- [ ] 记录辅助文件支持情况（supported/ignored/required）:
  - `workflow.md` - Factory 是否加载?
  - `steps.md` - Factory 是否加载?
  - `phases.md` - Factory 是否加载?
  - 其他相对路径引用文件?
- [ ] 记录技能间调用机制（subagent invocation）:
  - Task (subagent) 在 Factory 中如何实现?
  - 一个技能如何调用另一个技能?
  - 是否需要特殊语法或约定?

## Done summary

TBD

## Evidence

- Commits:
- Tests:
- PRs:
