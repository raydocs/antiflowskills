# fn-2-l67.4 移植审查技能 plan-review impl-review

## Description

移植审查技能: flow-plan-review (计划审查) 和 flow-impl-review (实现审查)。

**Size:** M
**Files:**
- `.factory/skills/flow-plan-review/SKILL.md` + `workflow.md`
- `.factory/skills/flow-impl-review/SKILL.md` + `workflow.md`

## Approach

1. 复制审查技能的 SKILL.md 和 workflow.md
2. 修改 description 为语义触发格式
3. 添加 Verification 节
4. 移除 hooks 依赖 (ralph-guard 相关)
5. 更新 RepoPrompt 调用路径 (`flowctl rp` 命令)
6. 简化审查流程为非阻塞模式 (无 receipt 强制)

## Factory-Specific Modifications

### Description 重写

| 原始 | 目标 |
|-----|------|
| "Triggers: /flow-next:plan-review" | "Review implementation plans with Carmack-level rigor before coding" |
| "Triggers: /flow-next:impl-review" | "Review code implementations for quality, security, and architectural soundness" |

### Verification 节示例

````markdown
## Verification

```bash
REPO_ROOT="${REPO_ROOT:-$(git rev-parse --show-toplevel 2>/dev/null || true)}"
if [ -z "$REPO_ROOT" ]; then
  echo "Error: Set REPO_ROOT=/absolute/path/to/repo"
  exit 1
fi

# 验证技能文件存在
ls "$REPO_ROOT/.factory/skills/flow-plan-review/SKILL.md"
# 预期: 文件存在，退出码 0

# 验证 rp-cli 可用 (macOS only)
rp-cli --version 2>/dev/null || echo "rp-cli not available (non-macOS)"
# 预期: 版本号或降级提示
```
````

## Key context

- 原始审查依赖 hooks 系统强制通过
- Factory 无 hooks，改为文档化的最佳实践
- rp-cli 为主（通过 `flowctl rp` 封装）
- 保持 Carmack-level 审查标准不变

## Acceptance

- [ ] flow-plan-review SKILL.md + workflow.md 已创建，包含:
  - 语义 description
  - Verification 节（使用正确的 4-backtick 格式）
  - 动态 repo root 路径（含降级处理）
- [ ] flow-impl-review SKILL.md + workflow.md 已创建，包含:
  - 语义 description
  - Verification 节（使用正确的 4-backtick 格式）
  - 动态 repo root 路径（含降级处理）
- [ ] 审查标准 (Carmack-level) 保持不变
- [ ] 无 hooks 依赖，改为文档化流程
- [ ] RepoPrompt 调用使用 `flowctl rp` 封装

## Done summary

TBD

## Evidence

- Commits:
- Tests:
- PRs:
